Домашнее задание
Отказоустойчивое хранилище на Ceph

Цель:
развернуть отказоустойчивый кластер хранения данных на базе Ceph;


Описание/Пошаговая инструкция выполнения домашнего задания:
Ceph позволяет создавать отказоустойчивое распределённое хранилище с поддержкой блочного, файлового и объектного доступа. Умение проектировать, разворачивать и обслуживать Ceph-кластеры критично при работе с надёжными и масштабируемыми системами хранения данных.


1. Разверните отказоустойчивый кластер Ceph с помощью Terraform и Ansible (можно использовать ceph-ansible).

Установите фактор репликации ≥2.
Рассчитайте объём хранилища и число PG для пулов:
RBD — 50–100% от общего объёма;
CephFS — 30% от общего объёма.
Создайте пулы, объясните логику расчёта в README.md.

2. Подключите клиентские машины:

Пробросьте 3 RBD-тома;
Настройте CephFS как общий раздел для всех клиентов.

3. Отработайте аварийные сценарии:

3.1. Сгенерировать split-brain, посмотреть поведение кластера, решить проблему (результат - запись консоли с выполнением)

3.2. Сгенерировать сбой ноды с osd, вывести из кластера, добавить новую

3.3. Сгенерировать сбой/обслуживание серверной/дата центра, проверить работоспособность сервисов (результат - запись консоли)

3.4. Расширить кластер на 2+osd, сделать перерасчёт pg, объяснить логику

3.5. Уменьшить кластер на 1+osd, сделать перерасчёт pg, объяснить логику



Формат сдачи

terraform манифесты
ansible роль (можно использовать https://github.com/ceph/ceph-ansible.git )
README.md